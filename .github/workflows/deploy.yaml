name: Deploy Simtropolis channel

on:
  push:
    branches: [ "main", "action" ]
  pull_request_target:
    branches: [ "main" ]

jobs:
  channel:
    uses: sebamarynissen/sc4pac-actions/.github/workflows/sc4pac-channel.yaml@main
    with:
      path: src/yaml
      channel-label: Simtropolis
      deploy-repository: sebamarynissen/Simtropolis-channel
      use-stex-api: true
      lint: false
    secrets:
      stex-api-key: ${{ secrets.STEX_API_KEY }}
    permissions:
      pages: write
      id-token: write
